<!DOCTYPE html>
<!-- saved from url=(0092)https://codelabs-preview.appspot.com/?file_id=1Zaw7jykgg-UtbOf3QatmU6JlHrk2wEtPh61uj1rrPuw#2 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  
  <title>Key Hiring Trends in Fintech</title>
  <link rel="stylesheet" href="./Key Hiring Trends in Fintech_files/css">
  <link rel="stylesheet" href="./Key Hiring Trends in Fintech_files/icon">
  <link rel="stylesheet" href="./Key Hiring Trends in Fintech_files/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab environment="web" feedback-link="https://github.com/phadkeraj/A1_HiringTrends" selected="2" codelab-title="Key Hiring Trends in Fintech"><div id="drawer"><div class="steps"><ol><li completed=""><a href="https://codelabs-preview.appspot.com/?file_id=1Zaw7jykgg-UtbOf3QatmU6JlHrk2wEtPh61uj1rrPuw#0"><span class="step"><span>Introduction</span></span></a></li><li completed=""><a href="https://codelabs-preview.appspot.com/?file_id=1Zaw7jykgg-UtbOf3QatmU6JlHrk2wEtPh61uj1rrPuw#1"><span class="step"><span>Getting set up</span></span></a></li><li completed="" selected=""><a href="https://codelabs-preview.appspot.com/?file_id=1Zaw7jykgg-UtbOf3QatmU6JlHrk2wEtPh61uj1rrPuw#2"><span class="step"><span>Building a dictionary of top keywords used frequently in Fintech</span></span></a></li><li><a href="https://codelabs-preview.appspot.com/?file_id=1Zaw7jykgg-UtbOf3QatmU6JlHrk2wEtPh61uj1rrPuw#3"><span class="step"><span>Extracting top 100 keywords for different methodologies</span></span></a></li><li><a href="https://codelabs-preview.appspot.com/?file_id=1Zaw7jykgg-UtbOf3QatmU6JlHrk2wEtPh61uj1rrPuw#4"><span class="step"><span>Building a scraper to scrape the data from Northern Trust Bank</span></span></a></li><li><a href="https://codelabs-preview.appspot.com/?file_id=1Zaw7jykgg-UtbOf3QatmU6JlHrk2wEtPh61uj1rrPuw#5"><span class="step"><span>Building a scraper to scrape the data from M&amp;T Bank</span></span></a></li><li><a href="https://codelabs-preview.appspot.com/?file_id=1Zaw7jykgg-UtbOf3QatmU6JlHrk2wEtPh61uj1rrPuw#6"><span class="step"><span>Fetching requirements for analysis from the websites</span></span></a></li><li><a href="https://codelabs-preview.appspot.com/?file_id=1Zaw7jykgg-UtbOf3QatmU6JlHrk2wEtPh61uj1rrPuw#7"><span class="step"><span>Interpretation of analysis</span></span></a></li></ol></div><div class="metadata">Did you find a mistake?<a target="_blank" href="https://github.com/phadkeraj/A1_HiringTrends">Please file a bug</a>.</div></div><div id="main"><div id="codelab-title"><div id="codelab-nav-buttons"><a href="https://codelabs-preview.appspot.com/" id="arrow-back"><i class="material-icons">arrow_back</i></a><a href="https://codelabs-preview.appspot.com/?file_id=1Zaw7jykgg-UtbOf3QatmU6JlHrk2wEtPh61uj1rrPuw#" id="menu"><i class="material-icons">menu</i></a></div><h1 class="title">Key Hiring Trends in Fintech</h1><div id="time-remaining" title="Time remaining"><i class="material-icons">access_time</i>0 mins remaining</div></div><div id="steps"><google-codelab-step label="Introduction" duration="0" step="1"><div class="instructions"><div class="inner"><h2 class="step-title">1. Introduction</h2>
        <p>This analysis revolves around finding the job  hiring trends in Northern Trust and M&amp;T bank with respect to a specific domain called fintech. With changing demographics, automation efforts and demand for new products and services, large financial institutions are realizing the power of technologies like data science, AI, cloud technologies and machine learning and are heavily investing to upgrade their technological platforms to cater to the upcoming revolution. Technology has been a key player in helping drive this revolution.  Things are fast evolving and as we enter 2019, it is interesting to understand the hiring trends in the top financial institutions in the US.</p>
<h2><strong>What is fintech?</strong></h2>
<p>Fintech is:</p>
<ul>
<li>Small , technology enabled new entrant to financial services.</li>
<li>Application of new technology to automate financial services.</li>
</ul>
<p>Fintech  is the new technology and innovation that aims to compete with traditional financial methods in the delivery of financial services. It is an emerging industry that uses technology to improve activities in finance.The use of smartphones for mobile banking, investing services and cryptocurrency are examples of technologies aiming to make financial services more accessible to the general public.</p>
<p>This codelab will walk you through creating relevant datasets from pdf files, obtaining keywords from the pfds, as well scraping bank websites, to ensure that your analysis of hiring trends is correct .</p>
<h2><strong>What you will build</strong></h2>
<p>In this codelab, you're going to build analysis of hiring trends in Northern Trust and M&amp;T bank. You'll :</p>
<ul>
<li>Extract relevant datasets from pdfs..</li>
<li>Obtain word count , text rank and tf/idf from csv's.</li>
<li>Classifying the words on basis of their occurence.</li>
<li>Scrape data from bank websites</li>
<li>Analyse the results.</li>
</ul>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/what will you build.PNG"></p>
<h2 class="checklist"><strong>What you'll learn</strong></h2>
<ul class="checklist">
<li>How to use python to get relevant datasets from pdfs.</li>
<li>How to clean raw data</li>
<li>How to obtain word count , tf/idf and text rank from csv files</li>
<li>How to build a scraper to scrape the data from the bank websites.</li>
</ul>
<h2><strong>What you'll need</strong></h2>
<ul>
<li>A recent version of Jupyter or python 3.5 or any python coding platform of your choice</li>
<li>Tableau</li>
<li><a href="https://github.com/phadkeraj/A1_HiringTrends/tree/master/Code" target="_blank">The sample code</a></li>
<li>Basic knowledge of Python, Tableau, JavaScript, and MS-Excel</li>
</ul>
<p>This codelab is focused on analysis of hiring trends. Non-relevant concepts and code blocks are glossed over and are provided for you to simply copy and paste.</p>


      </div></div></google-codelab-step><google-codelab-step label="Getting set up" duration="0" step="2"><div class="instructions"><div class="inner"><h2 class="step-title">2. Getting set up</h2>
        <h2><strong>Download the Code</strong></h2>
<p>Click the following link to download all the code for this codelab:</p>
<p><a href="https://github.com/phadkeraj/A1_HiringTrends" target="_blank"><paper-button class="colored" raised=""><iron-icon icon="file-download"></iron-icon>Download source code</paper-button></a></p>
<p>Unpack the downloaded zip file. This will unpack a root folder (<a href="https://github.com/phadkeraj/A1_HiringTrends" target="_blank">A1_HiringTrends</a>), which contains one folder for each step of this codelab, along with all of the resources you will need.</p>
<p>The step-NN folders contain the desired end state of each step of this codelab. They are there for reference. We'll be doing all our coding work in a directory called work.</p>
<h2><strong>Install and run Jupyter notebook</strong></h2>
<p>While you're free to use your own python platform, this codelab is designed to work well with the Jupyter platform.The best way to install Jupyter is to download it from a scientific python distribution which also includes scientific python packages. Anaconda is the most common one.  If you don't have this app yet ,you can install it from chrome using the following link.</p>
<p><a href="https://www.anaconda.com/distribution/" target="_blank"><paper-button class="colored" raised="">Install Anaconda for installing Jupyter</paper-button></a> </p>
<p>After installing the anaconda platform click shortcut on the desktop : </p>
<p><img style="max-width: 134.50px" src="./Key Hiring Trends in Fintech_files/download (1).jpg"></p>
<aside class="special"><p>More help: <a href="https://jupyter.readthedocs.io/en/latest/architecture/how_jupyter_ipython_work.html" target="_blank">Learn more about Jupyter</a></p>
</aside>
<p>Running the Jupyter notebook: </p>
<p><img alt="Screen Shot 2016-02-18 at 11.45.19 AM.png" style="max-width: 79.50px" src="./Key Hiring Trends in Fintech_files/0_I3hkRieQ6B3qwwhy_.png"></p>
<p>You'll see this dialog next, which allows you to configure your Jupyter notebook:</p>
<p><img alt="Screen Shot 2016-02-18 at 11.48.14 AM.png" style="max-width: 765.71px" src="./Key Hiring Trends in Fintech_files/anaconda final installation.png"></p>
<p>Click the <strong>okay and dont show again</strong> button, and click on  the <strong>launch </strong>button under <code>jupyter</code> folder. This will enable you to open a jupyter window in your default set browser.</p>
<p><img style="max-width: 233.00px" src="./Key Hiring Trends in Fintech_files/anaconda step 22.png"></p>
<p>Once the jupyter is open click on :</p>
<p>Then click on the dropdown sign in the <strong>new </strong>button.Then click on Python 3 button.</p>
<p><img alt="Screen Shot 2016-02-18 at 12.22.18 PM.png" style="max-width: 651.00px" src="./Key Hiring Trends in Fintech_files/jupyter final.png"></p>
<p>Now visit your work site in your jupyter file and copy the code given above:</p>
<h2><strong>Install and run Tableau</strong></h2>
<p>Go to the site whose link is given below and sign up for subscription for free.</p>
<p><a href="https://www.tableau.com/trial/tableau-software" target="_blank"><paper-button class="colored" raised="">Install Tableau </paper-button></a> </p>
<p>Click on <strong>Tableau Public</strong> button</p>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/tableau installation 4.png"></p>
<p>Click on <strong>Download Tableau Public </strong>button</p>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/pasted image 0.png"></p>
<p>Once the setup is installed<strong> launch the setup</strong></p>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/pasted image 0(1).png"></p>
<p>If you have Windows XP or Windows 7 or latest versions of Tableau then there should not be any problem installing it.</p>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/pasted image 0(2).png"></p>
<p>Click on <strong>File &gt; New </strong></p>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/pasted image 0(3).png"></p>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/pasted image 0(4).png"></p>
<aside class="special"><p>From this point forward, all coding of program should be performed using this jupyter notebook unless stated otherwise.</p>
</aside>


      </div></div></google-codelab-step><google-codelab-step label="Building a dictionary of top keywords used frequently in Fintech" duration="0" step="3" selected=""><div class="instructions"><div class="inner"><h2 class="step-title">3. Building a dictionary of top keywords used frequently in Fintech</h2>
        <h2><strong>Procedure to extract text from all the pdfs</strong></h2>
<h3>Extracting of texts from pdfs using pdf miner</h3>
<ol type="1" start="1">
<li>Read the pdf files in python using pdf miner.</li>
<li>What is a PDF Miner ?</li>
</ol>
<p>PDFMiner is a tool for extracting information from PDF documents. Unlike other PDF-related tools, it focuses entirely on getting and analyzing text data. PDFMiner allows one to obtain the exact location of text in a page, as well as other information such as fonts or lines. It includes a PDF converter that can transform PDF files into other text formats (such as HTML). It has an extensible PDF parser that can be used for other purposes than text analysis.</p>
<ol type="1" start="3">
<li>Convert the pdf into text - The pdf is converted into text form and then the text is tokenized so that data can be worked upon.</li>
</ol>
<h3>    What is Tokenization of data </h3>
<p>      Splitting of data into words is called tokenization.A sentence or data can be split into words using the method <strong>word_tokenize():</strong></p>
<p><strong>Cleaning the raw datasets </strong></p>
<p>    The datasets need to be cleaned as it is raw data and contains a lot of anomalies like stop words, special characters, repeated words, punctuation,  tags. Tokenization with pos is done.This is done by lemmatizing the data</p>
<h3>Converting text into lower case</h3>
<p>    The whole text is converted into lower case so that if there are two same words, one with first letter in upper case and the other with first letter in lower case , the algorithm should treat it the same way. </p>
<h3>Lemmatizing data </h3>
<p>Lemmatization is used to prepare words, texts and documents for further processing. This is done by importing nltk package . Natural Language Tool Kit (nltk) is to make programs that work with natural language.</p>
<p>You can install nltk using pip installer if it is not installed in your Python installation. To test the installation:<br><br>1. Open your Python IDE or the CLI interface (whichever you use normally)<br>2. Type import nltk and press enter if no message of missing nltk is shown then nltk is installed on your computer.</p>
<p>Now after installation, you can use the nltk library for Stemming and Lemmatization using Python. </p>
<pre><code><span class="pln">    </span><span class="kwd">def</span><span class="pln"> extract_text_from_pdf</span><span class="pun">(</span><span class="pln">pdf_path</span><span class="pun">):</span><span class="pln">
    resource_manager </span><span class="pun">=</span><span class="pln"> </span><span class="typ">PDFResourceManager</span><span class="pun">()</span><span class="pln">
    fake_file_handle </span><span class="pun">=</span><span class="pln"> io</span><span class="pun">.</span><span class="typ">StringIO</span><span class="pun">()</span><span class="pln">
    codec </span><span class="pun">=</span><span class="pln"> </span><span class="str">'utf-8'</span><span class="pln">
    laparams </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LAParams</span><span class="pun">()</span><span class="pln">
    converter </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TextConverter</span><span class="pun">(</span><span class="pln">resource_manager</span><span class="pun">,</span><span class="pln"> fake_file_handle</span><span class="pun">,</span><span class="pln">codec</span><span class="pun">=</span><span class="pln">codec</span><span class="pun">,</span><span class="pln"> laparams</span><span class="pun">=</span><span class="pln">laparams</span><span class="pun">)</span><span class="pln">
    page_interpreter </span><span class="pun">=</span><span class="pln"> </span><span class="typ">PDFPageInterpreter</span><span class="pun">(</span><span class="pln">resource_manager</span><span class="pun">,</span><span class="pln"> converter</span><span class="pun">)</span><span class="pln">

    </span><span class="kwd">with</span><span class="pln"> open</span><span class="pun">(</span><span class="pln">pdf_path</span><span class="pun">,</span><span class="pln"> </span><span class="str">'rb'</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> fh</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> page </span><span class="kwd">in</span><span class="pln"> </span><span class="typ">PDFPage</span><span class="pun">.</span><span class="pln">get_pages</span><span class="pun">(</span><span class="pln">fh</span><span class="pun">):</span><span class="pln">
            page_interpreter</span><span class="pun">.</span><span class="pln">process_page</span><span class="pun">(</span><span class="pln">page</span><span class="pun">)</span><span class="pln">
        text </span><span class="pun">=</span><span class="pln"> fake_file_handle</span><span class="pun">.</span><span class="pln">getvalue</span><span class="pun">().</span><span class="pln">lower</span><span class="pun">()</span><span class="pln">
        stop_words </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">stopwords</span><span class="pun">.</span><span class="pln">words</span><span class="pun">(</span><span class="str">"english"</span><span class="pun">))</span><span class="pln">
                </span><span class="com">#remove tags</span><span class="pln">
        text</span><span class="pun">=</span><span class="pln">re</span><span class="pun">.</span><span class="kwd">sub</span><span class="pun">(</span><span class="str">"&amp;lt;/?.*?&amp;gt;"</span><span class="pun">,</span><span class="str">" &amp;lt;&amp;gt; "</span><span class="pun">,</span><span class="pln">text</span><span class="pun">)</span><span class="pln">
                </span><span class="com"># remove special characters and digits</span><span class="pln">
        text</span><span class="pun">=</span><span class="pln">re</span><span class="pun">.</span><span class="kwd">sub</span><span class="pun">(</span><span class="str">"(\\d|\\W)+"</span><span class="pun">,</span><span class="str">" "</span><span class="pun">,</span><span class="pln">text</span><span class="pun">)</span><span class="pln">
                </span><span class="com">##Convert to list from string</span><span class="pln">
        text </span><span class="pun">=</span><span class="pln"> text</span><span class="pun">.</span><span class="pln">split</span><span class="pun">()</span><span class="pln">
                </span><span class="com">#Lemmatisation</span><span class="pln">
        lem </span><span class="pun">=</span><span class="pln"> </span><span class="typ">WordNetLemmatizer</span><span class="pun">()</span><span class="pln">
        text </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">lem</span><span class="pun">.</span><span class="pln">lemmatize</span><span class="pun">(</span><span class="pln">word</span><span class="pun">,</span><span class="pln">pos</span><span class="pun">=</span><span class="str">"v"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> word </span><span class="kwd">in</span><span class="pln"> text </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> word </span><span class="kwd">in</span><span class="pln"> stop_words</span><span class="pun">]</span><span class="pln">
        text </span><span class="pun">=</span><span class="pln"> </span><span class="str">" "</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">text</span><span class="pun">)</span><span class="pln">
    </span><span class="com"># close open handles</span><span class="pln">
    converter</span><span class="pun">.</span><span class="pln">close</span><span class="pun">()</span><span class="pln">
    fake_file_handle</span><span class="pun">.</span><span class="pln">close</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> text</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> text</span></code></pre>


      </div></div></google-codelab-step><google-codelab-step label="Extracting top 100 keywords for different methodologies" duration="0" step="4"><div class="instructions"><div class="inner"><h2 class="step-title">4. Extracting top 100 keywords for different methodologies</h2>
        <h2>Word Count </h2>
<p>The count of occurance of every word in all the csv's is called word count. A word count csv file is generated to calculate the frequency of every word. Write the following code in the jupyter file:</p>
<pre><code><span class="kwd">import</span><span class="pln"> io
</span><span class="kwd">import</span><span class="pln"> nltk
</span><span class="kwd">import</span><span class="pln"> os
</span><span class="kwd">import</span><span class="pln"> math
</span><span class="kwd">import</span><span class="pln"> re
</span><span class="kwd">import</span><span class="pln"> csv
</span><span class="kwd">from</span><span class="pln"> pdfminer</span><span class="pun">.</span><span class="pln">converter </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">TextConverter</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> pdfminer</span><span class="pun">.</span><span class="pln">pdfinterp </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">PDFPageInterpreter</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> pdfminer</span><span class="pun">.</span><span class="pln">pdfinterp </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">PDFResourceManager</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> pdfminer</span><span class="pun">.</span><span class="pln">pdfpage </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">PDFPage</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">corpus </span><span class="kwd">import</span><span class="pln"> stopwords
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">tokenize </span><span class="kwd">import</span><span class="pln"> word_tokenize
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">stem</span><span class="pun">.</span><span class="pln">porter </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">PorterStemmer</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">stem</span><span class="pun">.</span><span class="pln">wordnet </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">WordNetLemmatizer</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> pdfminer</span><span class="pun">.</span><span class="pln">layout </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">LAParams</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> extract_text_from_pdf</span><span class="pun">(</span><span class="pln">pdf_path</span><span class="pun">):</span><span class="pln">
    resource_manager </span><span class="pun">=</span><span class="pln"> </span><span class="typ">PDFResourceManager</span><span class="pun">()</span><span class="pln">
    fake_file_handle </span><span class="pun">=</span><span class="pln"> io</span><span class="pun">.</span><span class="typ">StringIO</span><span class="pun">()</span><span class="pln">
    codec </span><span class="pun">=</span><span class="pln"> </span><span class="str">'utf-8'</span><span class="pln">
    laparams </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LAParams</span><span class="pun">()</span><span class="pln">
    converter </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TextConverter</span><span class="pun">(</span><span class="pln">resource_manager</span><span class="pun">,</span><span class="pln"> fake_file_handle</span><span class="pun">,</span><span class="pln">codec</span><span class="pun">=</span><span class="pln">codec</span><span class="pun">,</span><span class="pln"> laparams</span><span class="pun">=</span><span class="pln">laparams</span><span class="pun">)</span><span class="pln">
    page_interpreter </span><span class="pun">=</span><span class="pln"> </span><span class="typ">PDFPageInterpreter</span><span class="pun">(</span><span class="pln">resource_manager</span><span class="pun">,</span><span class="pln"> converter</span><span class="pun">)</span><span class="pln">

    </span><span class="kwd">with</span><span class="pln"> open</span><span class="pun">(</span><span class="pln">pdf_path</span><span class="pun">,</span><span class="pln"> </span><span class="str">'rb'</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> fh</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> page </span><span class="kwd">in</span><span class="pln"> </span><span class="typ">PDFPage</span><span class="pun">.</span><span class="pln">get_pages</span><span class="pun">(</span><span class="pln">fh</span><span class="pun">):</span><span class="pln">
            page_interpreter</span><span class="pun">.</span><span class="pln">process_page</span><span class="pun">(</span><span class="pln">page</span><span class="pun">)</span><span class="pln">
        text </span><span class="pun">=</span><span class="pln"> fake_file_handle</span><span class="pun">.</span><span class="pln">getvalue</span><span class="pun">().</span><span class="pln">lower</span><span class="pun">()</span><span class="pln">
        stop_words </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">stopwords</span><span class="pun">.</span><span class="pln">words</span><span class="pun">(</span><span class="str">"english"</span><span class="pun">))</span><span class="pln">
                </span><span class="com">#remove tags</span><span class="pln">
        text</span><span class="pun">=</span><span class="pln">re</span><span class="pun">.</span><span class="kwd">sub</span><span class="pun">(</span><span class="str">"&amp;lt;/?.*?&amp;gt;"</span><span class="pun">,</span><span class="str">" &amp;lt;&amp;gt; "</span><span class="pun">,</span><span class="pln">text</span><span class="pun">)</span><span class="pln">
                </span><span class="com"># remove special characters and digits</span><span class="pln">
        text</span><span class="pun">=</span><span class="pln">re</span><span class="pun">.</span><span class="kwd">sub</span><span class="pun">(</span><span class="str">"(\\d|\\W)+"</span><span class="pun">,</span><span class="str">" "</span><span class="pun">,</span><span class="pln">text</span><span class="pun">)</span><span class="pln">
                </span><span class="com">##Convert to list from string</span><span class="pln">
        text </span><span class="pun">=</span><span class="pln"> text</span><span class="pun">.</span><span class="pln">split</span><span class="pun">()</span><span class="pln">
                </span><span class="com">#Lemmatisation</span><span class="pln">
        lem </span><span class="pun">=</span><span class="pln"> </span><span class="typ">WordNetLemmatizer</span><span class="pun">()</span><span class="pln">
        text </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">lem</span><span class="pun">.</span><span class="pln">lemmatize</span><span class="pun">(</span><span class="pln">word</span><span class="pun">,</span><span class="pln">pos</span><span class="pun">=</span><span class="str">"v"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> word </span><span class="kwd">in</span><span class="pln"> text </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> word </span><span class="kwd">in</span><span class="pln"> stop_words</span><span class="pun">]</span><span class="pln">
        text </span><span class="pun">=</span><span class="pln"> </span><span class="str">" "</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">text</span><span class="pun">)</span><span class="pln">
    </span><span class="com"># close open handles</span><span class="pln">
    converter</span><span class="pun">.</span><span class="pln">close</span><span class="pun">()</span><span class="pln">
    fake_file_handle</span><span class="pun">.</span><span class="pln">close</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> text</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> text
filePath</span><span class="pun">=[]</span><span class="pln">
bloblist </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> file </span><span class="kwd">in</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">listdir</span><span class="pun">(</span><span class="str">"C:/ADS/A1_HiringTrends/Data/To_Parse"</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">lower</span><span class="pun">().</span><span class="pln">endswith</span><span class="pun">(</span><span class="str">".pdf"</span><span class="pun">):</span><span class="pln">
        filePath</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">os</span><span class="pun">.</span><span class="pln">path</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="str">"C:/ADS/A1_HiringTrends/Data/To_Parse"</span><span class="pun">,</span><span class="pln"> file</span><span class="pun">))</span><span class="pln">
datatext</span><span class="pun">=</span><span class="str">''</span><span class="pln">
lem </span><span class="pun">=</span><span class="pln"> </span><span class="typ">WordNetLemmatizer</span><span class="pun">()</span><span class="pln">
stem </span><span class="pun">=</span><span class="pln"> </span><span class="typ">PorterStemmer</span><span class="pun">()</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> path </span><span class="kwd">in</span><span class="pln"> filePath</span><span class="pun">:</span><span class="pln">
    datatext</span><span class="pun">+=</span><span class="str">'\n'</span><span class="pun">+</span><span class="pln">extract_text_from_pdf</span><span class="pun">(</span><span class="pln">path</span><span class="pun">).</span><span class="pln">lower</span><span class="pun">()</span><span class="pln">
stop_words </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">stopwords</span><span class="pun">.</span><span class="pln">words</span><span class="pun">(</span><span class="str">'english'</span><span class="pun">))</span><span class="pln">

word_tokens </span><span class="pun">=</span><span class="pln"> word_tokenize</span><span class="pun">(</span><span class="pln">datatext</span><span class="pun">)</span><span class="pln">
filtered_sentence </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> w </span><span class="kwd">in</span><span class="pln"> word_tokens</span><span class="pun">:</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> w </span><span class="kwd">not</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> stop_words</span><span class="pun">:</span><span class="pln">
        </span><span class="com">#w=stem.stem(w)</span><span class="pln">
        filtered_sentence</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">w</span><span class="pun">)</span><span class="pln">
fdist1 </span><span class="pun">=</span><span class="pln"> nltk</span><span class="pun">.</span><span class="typ">FreqDist</span><span class="pun">(</span><span class="pln">filtered_sentence</span><span class="pun">)</span><span class="pln">
wtr </span><span class="pun">=</span><span class="pln"> csv</span><span class="pun">.</span><span class="pln">writer</span><span class="pun">(</span><span class="pln">open </span><span class="pun">(</span><span class="str">'C:/ADS/A1_HiringTrends/Data/Generated/By Algorithms/WordCount.csv'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'w'</span><span class="pun">),</span><span class="pln"> delimiter</span><span class="pun">=</span><span class="str">','</span><span class="pun">,</span><span class="pln"> lineterminator</span><span class="pun">=</span><span class="str">'\n'</span><span class="pun">)</span><span class="pln">
    </span><span class="com">#writer = csv.writer(f)</span><span class="pln">
x</span><span class="pun">=</span><span class="lit">1</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> row </span><span class="kwd">in</span><span class="pln"> fdist1</span><span class="pun">.</span><span class="pln">most_common</span><span class="pun">(</span><span class="lit">500</span><span class="pun">):</span><span class="pln">
    wtr</span><span class="pun">.</span><span class="pln">writerow</span><span class="pun">([</span><span class="pln">str</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">[</span><span class="pln">row</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]])</span><span class="pln">
    x</span><span class="pun">+=</span><span class="lit">1</span><span class="pln">
</span><span class="com">#f.close()</span><span class="pln">

</span></code></pre>
<h2>Tf/ Idf </h2>
<p>Transform a count matrix to a normalized tf or tf-idf representation</p>
<p>Tf means term-frequency while tf-idf means term-frequency times inverse document-frequency. This is a common term weighting scheme in information retrieval, that has also found good use in document classification.</p>
<p>The goal of using tf-idf instead of the raw frequencies of occurrence of a token in a given document is to scale down the impact of tokens that occur very frequently in a given corpus and that are hence empirically less informative than features that occur in a small fraction of the training corpus.</p>
<p>The formula that is used to compute the tf-idf of term t is tf-idf(d, t) = tf(t) * idf(d, t), and the idf is computed as idf(d, t) = log [ n / df(d, t) ] + 1 (if smooth_idf=False), where n is the total number of documents and df(d, t) is the document frequency; the document frequency is the number of documents d that contain term t. The effect of adding "1" to the idf in the equation above is that terms with zero idf, i.e., terms that occur in all documents in a training set, will not be entirely ignored. (Note that the idf formula above differs from the standard textbook notation that defines the idf as idf(d, t) = log [ n / (df(d, t) + 1) ]).</p>
<p>If smooth_idf=True (the default), the constant "1" is added to the numerator and denominator of the idf as if an extra document was seen containing every term in the collection exactly once, which prevents zero divisions: idf(d, t) = log [ (1 + n) / (1 + df(d, t)) ] + 1.</p>
<p>Furthermore, the formulas used to compute tf and idf depend on parameter settings that correspond to the SMART notation used in IR as follows:</p>
<p>Tf is "n" (natural) by default, "l" (logarithmic) when sublinear_tf=True. Idf is "t" when use_idf is given, "n" (none) otherwise. Normalization is "c" (cosine) when norm='l2', "n" (none) when norm=None.</p>
<pre><code><span class="kwd">import</span><span class="pln"> io
</span><span class="kwd">import</span><span class="pln"> nltk
</span><span class="kwd">import</span><span class="pln"> os

tfidf </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TfidfVectorizer</span><span class="pun">(</span><span class="pln">analyzer</span><span class="pun">=</span><span class="str">'word'</span><span class="pun">,</span><span class="pln"> stop_words</span><span class="pun">=</span><span class="str">'english'</span><span class="pun">,</span><span class="pln"> tokenizer</span><span class="pun">=</span><span class="pln">dummy_fun</span><span class="pun">,</span><span class="pln">
    preprocessor</span><span class="pun">=</span><span class="pln">dummy_fun</span><span class="pun">,</span><span class="pln">
    token_pattern</span><span class="pun">=</span><span class="kwd">None</span><span class="pun">,</span><span class="pln"> use_idf</span><span class="pun">=</span><span class="kwd">True</span><span class="pun">)</span><span class="pln">
response </span><span class="pun">=</span><span class="pln"> tfidf</span><span class="pun">.</span><span class="pln">fit_transform</span><span class="pun">(</span><span class="pln">tokenized_doc</span><span class="pun">)</span><span class="pln">
weights </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">asarray</span><span class="pun">(</span><span class="pln">response</span><span class="pun">.</span><span class="pln">mean</span><span class="pun">(</span><span class="pln">axis</span><span class="pun">=</span><span class="lit">0</span><span class="pun">)).</span><span class="pln">ravel</span><span class="pun">().</span><span class="pln">tolist</span><span class="pun">()</span><span class="pln">
weights_df </span><span class="pun">=</span><span class="pln"> pd</span><span class="pun">.</span><span class="typ">DataFrame</span><span class="pun">({</span><span class="str">'Term'</span><span class="pun">:</span><span class="pln"> tfidf</span><span class="pun">.</span><span class="pln">get_feature_names</span><span class="pun">(),</span><span class="pln"> </span><span class="str">'Weight'</span><span class="pun">:</span><span class="pln"> weights</span><span class="pun">})</span><span class="pln">
weights_df</span><span class="pun">.</span><span class="pln">sort_values</span><span class="pun">(</span><span class="kwd">by</span><span class="pun">=</span><span class="str">'Weight'</span><span class="pun">,</span><span class="pln"> ascending</span><span class="pun">=</span><span class="kwd">False</span><span class="pun">).</span><span class="pln">head</span><span class="pun">(</span><span class="lit">500</span><span class="pun">)</span><span class="pln">
</span><span class="com">#print(weights_df.sort_values(by='Weight', ascending=False).head(100))</span><span class="pln">
</span></code></pre>
<h2>Text Rank</h2>
<ul>
<li>The first step would be to concatenate all the text contained in the articles</li>
<li>Then split the text into individual sentences</li>
<li>In the next step, we will find vector representation (word embeddings) for each and every sentence</li>
<li>Similarities between sentence vectors are then calculated and stored in a matrix</li>
<li>The similarity matrix is then converted into a graph, with sentences as vertices and similarity scores as edges, for sentence rank calculation</li>
<li>Finally, a certain number of top-ranked sentences form the final summary</li>
</ul>
<p><img style="max-width: 465.30px" src="./Key Hiring Trends in Fintech_files/textrank image.png"></p>
<h2>Reviewing the data manually</h2>
<p>The data is reviewed manually as there are still some anomalies left in the lists so you manually select top 100 most relevant words out of all the 3 lists obtained in the previous section.Now we have 3 lists of top 100 keywords.</p>
<p>The code for Text Rank is given below</p>
<pre><code><span class="kwd">from</span><span class="pln"> __future__ </span><span class="kwd">import</span><span class="pln"> print_function
</span><span class="kwd">import</span><span class="pln"> io
</span><span class="kwd">import</span><span class="pln"> nltk
</span><span class="kwd">import</span><span class="pln"> os
</span><span class="kwd">import</span><span class="pln"> math
</span><span class="kwd">import</span><span class="pln"> re
</span><span class="kwd">import</span><span class="pln"> csv
</span><span class="kwd">import</span><span class="pln"> editdistance
</span><span class="kwd">import</span><span class="pln"> itertools
</span><span class="kwd">import</span><span class="pln"> networkx </span><span class="kwd">as</span><span class="pln"> nx
</span><span class="kwd">import</span><span class="pln"> numpy </span><span class="kwd">as</span><span class="pln"> np
</span><span class="kwd">from</span><span class="pln"> pdfminer</span><span class="pun">.</span><span class="pln">converter </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">TextConverter</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> pdfminer</span><span class="pun">.</span><span class="pln">pdfinterp </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">PDFPageInterpreter</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> pdfminer</span><span class="pun">.</span><span class="pln">pdfinterp </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">PDFResourceManager</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> pdfminer</span><span class="pun">.</span><span class="pln">pdfpage </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">PDFPage</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">corpus </span><span class="kwd">import</span><span class="pln"> stopwords
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">tokenize </span><span class="kwd">import</span><span class="pln"> word_tokenize
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">stem</span><span class="pun">.</span><span class="pln">porter </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">PorterStemmer</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">stem</span><span class="pun">.</span><span class="pln">wordnet </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">WordNetLemmatizer</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> pdfminer</span><span class="pun">.</span><span class="pln">layout </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">LAParams</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> summa </span><span class="kwd">import</span><span class="pln"> keywords
</span><span class="kwd">import</span><span class="pln"> scipy
</span><span class="kwd">import</span><span class="pln"> sys
</span><span class="kwd">try</span><span class="pun">:</span><span class="pln">
    reload</span><span class="pun">(</span><span class="pln">sys</span><span class="pun">)</span><span class="pln">
    sys</span><span class="pun">.</span><span class="pln">setdefaultencoding</span><span class="pun">(</span><span class="str">'utf-8'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">except</span><span class="pun">:</span><span class="pln">
    </span><span class="kwd">pass</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> extract_text_from_pdf</span><span class="pun">(</span><span class="pln">pdf_path</span><span class="pun">):</span><span class="pln">
    resource_manager </span><span class="pun">=</span><span class="pln"> </span><span class="typ">PDFResourceManager</span><span class="pun">()</span><span class="pln">
    fake_file_handle </span><span class="pun">=</span><span class="pln"> io</span><span class="pun">.</span><span class="typ">StringIO</span><span class="pun">()</span><span class="pln">
    codec </span><span class="pun">=</span><span class="pln"> </span><span class="str">'utf-8'</span><span class="pln">
    laparams </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LAParams</span><span class="pun">()</span><span class="pln">
    converter </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TextConverter</span><span class="pun">(</span><span class="pln">resource_manager</span><span class="pun">,</span><span class="pln"> fake_file_handle</span><span class="pun">,</span><span class="pln">codec</span><span class="pun">=</span><span class="pln">codec</span><span class="pun">,</span><span class="pln"> laparams</span><span class="pun">=</span><span class="pln">laparams</span><span class="pun">)</span><span class="pln">
    page_interpreter </span><span class="pun">=</span><span class="pln"> </span><span class="typ">PDFPageInterpreter</span><span class="pun">(</span><span class="pln">resource_manager</span><span class="pun">,</span><span class="pln"> converter</span><span class="pun">)</span><span class="pln">

    </span><span class="kwd">with</span><span class="pln"> open</span><span class="pun">(</span><span class="pln">pdf_path</span><span class="pun">,</span><span class="pln"> </span><span class="str">'rb'</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> fh</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> page </span><span class="kwd">in</span><span class="pln"> </span><span class="typ">PDFPage</span><span class="pun">.</span><span class="pln">get_pages</span><span class="pun">(</span><span class="pln">fh</span><span class="pun">):</span><span class="pln">
            page_interpreter</span><span class="pun">.</span><span class="pln">process_page</span><span class="pun">(</span><span class="pln">page</span><span class="pun">)</span><span class="pln">
        text </span><span class="pun">=</span><span class="pln"> fake_file_handle</span><span class="pun">.</span><span class="pln">getvalue</span><span class="pun">()</span><span class="pln">
        stop_words </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">stopwords</span><span class="pun">.</span><span class="pln">words</span><span class="pun">(</span><span class="str">"english"</span><span class="pun">))</span><span class="pln">
                </span><span class="com">#remove tags</span><span class="pln">
        text</span><span class="pun">=</span><span class="pln">re</span><span class="pun">.</span><span class="kwd">sub</span><span class="pun">(</span><span class="str">"&amp;lt;/?.*?&amp;gt;"</span><span class="pun">,</span><span class="str">" &amp;lt;&amp;gt; "</span><span class="pun">,</span><span class="pln">text</span><span class="pun">)</span><span class="pln">
                </span><span class="com"># remove special characters and digits</span><span class="pln">
        text</span><span class="pun">=</span><span class="pln">re</span><span class="pun">.</span><span class="kwd">sub</span><span class="pun">(</span><span class="str">"(\\d|\\W)+"</span><span class="pun">,</span><span class="str">" "</span><span class="pun">,</span><span class="pln">text</span><span class="pun">)</span><span class="pln">
                </span><span class="com">##Convert to list from string</span><span class="pln">
        text </span><span class="pun">=</span><span class="pln"> text</span><span class="pun">.</span><span class="pln">split</span><span class="pun">()</span><span class="pln">
                </span><span class="com">#Lemmatisation</span><span class="pln">
        lem </span><span class="pun">=</span><span class="pln"> </span><span class="typ">WordNetLemmatizer</span><span class="pun">()</span><span class="pln">
        text </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">lem</span><span class="pun">.</span><span class="pln">lemmatize</span><span class="pun">(</span><span class="pln">word</span><span class="pun">,</span><span class="pln">pos</span><span class="pun">=</span><span class="str">"v"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> word </span><span class="kwd">in</span><span class="pln"> text </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> word </span><span class="kwd">in</span><span class="pln"> stop_words</span><span class="pun">]</span><span class="pln">
        text </span><span class="pun">=</span><span class="pln"> </span><span class="str">" "</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">text</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> text</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> text

filePath</span><span class="pun">=[]</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> file </span><span class="kwd">in</span><span class="pln"> os</span><span class="pun">.</span><span class="pln">listdir</span><span class="pun">(</span><span class="str">"C:/ADS/A1_HiringTrends/Data/To_Parse"</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> file</span><span class="pun">.</span><span class="pln">lower</span><span class="pun">().</span><span class="pln">endswith</span><span class="pun">(</span><span class="str">".pdf"</span><span class="pun">):</span><span class="pln">
        filePath</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">os</span><span class="pun">.</span><span class="pln">path</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="str">"C:/ADS/A1_HiringTrends/Data/To_Parse"</span><span class="pun">,</span><span class="pln"> file</span><span class="pun">))</span><span class="pln">
datatext</span><span class="pun">=</span><span class="str">''</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> path </span><span class="kwd">in</span><span class="pln"> filePath</span><span class="pun">:</span><span class="pln">
    datatext</span><span class="pun">+=</span><span class="str">'\n'</span><span class="pun">+</span><span class="pln">extract_text_from_pdf</span><span class="pun">(</span><span class="pln">path</span><span class="pun">).</span><span class="pln">lower</span><span class="pun">()</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> codecs
</span><span class="kwd">from</span><span class="pln"> textrank4zh </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">TextRank4Keyword</span><span class="pln">

text </span><span class="pun">=</span><span class="pln"> datatext


tr4w </span><span class="pun">=</span><span class="pln"> </span><span class="typ">TextRank4Keyword</span><span class="pun">()</span><span class="pln">
tr4w</span><span class="pun">.</span><span class="pln">analyze</span><span class="pun">(</span><span class="pln">text</span><span class="pun">=</span><span class="pln">text</span><span class="pun">,</span><span class="pln">lower</span><span class="pun">=</span><span class="kwd">True</span><span class="pun">,</span><span class="pln"> window</span><span class="pun">=</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> pagerank_config</span><span class="pun">={</span><span class="str">'alpha'</span><span class="pun">:</span><span class="lit">0.85</span><span class="pun">})</span><span class="pln">

</span><span class="com">#for item in tr4w.get_keywords(200, word_min_len=2):</span><span class="pln">
</span><span class="com">#    print(item.word, item.weight)</span><span class="pln">

wtr </span><span class="pun">=</span><span class="pln"> csv</span><span class="pun">.</span><span class="pln">writer</span><span class="pun">(</span><span class="pln">open </span><span class="pun">(</span><span class="str">'C:/ADS/A1_HiringTrends/Data/Generated/By Algorithms/Textrank.csv'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'w'</span><span class="pun">),</span><span class="pln"> delimiter</span><span class="pun">=</span><span class="str">','</span><span class="pun">,</span><span class="pln"> lineterminator</span><span class="pun">=</span><span class="str">'\n'</span><span class="pun">)</span><span class="pln">
x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> item </span><span class="kwd">in</span><span class="pln"> tr4w</span><span class="pun">.</span><span class="pln">get_keywords</span><span class="pun">(</span><span class="lit">500</span><span class="pun">,</span><span class="pln"> word_min_len</span><span class="pun">=</span><span class="lit">2</span><span class="pun">):</span><span class="pln">
    wtr</span><span class="pun">.</span><span class="pln">writerow</span><span class="pun">([</span><span class="pln">str</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">[</span><span class="pln">item</span><span class="pun">.</span><span class="pln">word</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">[</span><span class="pln">item</span><span class="pun">.</span><span class="pln">weight</span><span class="pun">])</span><span class="pln">
    x</span><span class="pun">+=</span><span class="lit">1</span><span class="pln">

</span></code></pre>


      </div></div></google-codelab-step><google-codelab-step label="Building a scraper to scrape the data from Northern Trust Bank" duration="0" step="5"><div class="instructions"><div class="inner"><h2 class="step-title">5. Building a scraper to scrape the data from Northern Trust Bank</h2>
        <p><strong>What is a scraper ?</strong></p>
<p>Web scraping is a method of data mining from web sites that uses software to extract all the information available from the targeted site by simulating human behavior.</p>
<h2><strong>Step 1</strong>: <strong>Find the URL you want to scrape.</strong></h2>
<p><a href="https://careers.northerntrust.com/?cmpid=google-ppc-LP-**LP%20-%20TM%20-%20Human%20Resources-Northern%20Trust%20Bank%20Careers-Exact&amp;cmpid=TM%20-%20Human%20Resources-ppc-googleNorthern%20Trust%20Bank%20Careers&amp;gclid=EAIaIQobChMIw4zL_fOs4AIVjovICh1WEwXcEAAYASAAEgIbcPD_BwE" target="_blank"><paper-button class="colored" raised="">Go to Northern Trust Careers</paper-button></a> </p>
<h2><strong>Step 2 : Identify the structure of the sites HTML</strong></h2>
<p>Once you've found a site that you can scrape, you can use chrome's developer tools to inspect the site's HTML structure. This is important, because more than likely, you'll want to scrape data from certain HTML elements, or elements with specific classes or IDs. With the inspect tool, you can quickly identify which elements you need to target.</p>
<h2><strong>Step 3</strong> : <strong>Install Beautiful Soup and Requests</strong></h2>
<p>There are other packages and frameworks, like Scrapy. But Beautiful Soup allows you to parse the HTML in a a beautiful way, so that's what I'm going to use. With Beautiful Soup, you'll also need to install a Request library, which will fetch the url content.</p>
<p>If you aren't familiar with it, the Beautiful Soup documentation has a lot of great examples to help get you started as well.</p>
<p>To install these two packages, you can simply use the pip installer.</p>
<p><img style="max-width: 604.50px" src="./Key Hiring Trends in Fintech_files/pip install 2.PNG"></p>
<p>and then...</p>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/beautiful soup.PNG"></p>
<h2><strong>    </strong><strong>Step 4: Web Scraping Code .</strong></h2>
<p>Here's how you structure the code:</p>
<pre><code><span class="kwd">import</span><span class="pln"> requests
</span><span class="kwd">import</span><span class="pln"> csv
</span><span class="kwd">from</span><span class="pln"> bs4 </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">BeautifulSoup</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> re
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">corpus </span><span class="kwd">import</span><span class="pln"> stopwords
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">stem</span><span class="pun">.</span><span class="pln">wordnet </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">WordNetLemmatizer</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> lxml
</span><span class="kwd">import</span><span class="pln"> csv
</span><span class="kwd">from</span><span class="pln"> collections </span><span class="kwd">import</span><span class="pln"> defaultdict
</span><span class="kwd">import</span><span class="pln"> pandas </span><span class="kwd">as</span><span class="pln"> pd
</span><span class="kwd">import</span><span class="pln"> numpy </span><span class="kwd">as</span><span class="pln"> np

</span><span class="com">#from lxml import etree</span><span class="pln">

</span><span class="com">#import urllib</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> urllib</span><span class="pun">.</span><span class="pln">request </span><span class="kwd">import</span><span class="pln"> urlopen
pages </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
abcd </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
qq</span><span class="pun">=[]</span><span class="pln">
count</span><span class="pun">=</span><span class="lit">0</span><span class="pln">
testDict </span><span class="pun">=</span><span class="pln"> defaultdict</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">26</span><span class="pun">):</span><span class="pln">
    url </span><span class="pun">=</span><span class="pln"> </span><span class="str">'https://careers.northerntrust.com/jobs/search/8420211/page'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> str</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">'.htm'</span><span class="pln">
    </span><span class="com">#print(url)</span><span class="pln">
    pages</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">url</span><span class="pun">)</span><span class="pln">
dataset</span><span class="pun">=[]</span><span class="pln">
counter </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
link</span><span class="pun">=[]</span><span class="pln">
</span><span class="com">#print(pages)</span><span class="pln">
count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> item </span><span class="kwd">in</span><span class="pln"> pages</span><span class="pun">:</span><span class="pln">
    page </span><span class="pun">=</span><span class="pln"> requests</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">item</span><span class="pun">)</span><span class="pln">
    soup </span><span class="pun">=</span><span class="pln"> </span><span class="typ">BeautifulSoup</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">text</span><span class="pun">,</span><span class="pln"> </span><span class="str">'html.parser'</span><span class="pun">)</span><span class="pln">

</span><span class="com">#print(soup)</span><span class="pln">

    hash_links </span><span class="pun">=</span><span class="pln"> soup</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">class_</span><span class="pun">=</span><span class="str">'job_filters_toggle jJobFiltersToggle'</span><span class="pun">)</span><span class="pln">
    hash_links</span><span class="pun">.</span><span class="pln">decompose</span><span class="pun">()</span><span class="pln">

    job_name_list </span><span class="pun">=</span><span class="pln"> soup</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">class_</span><span class="pun">=</span><span class="str">'info_listings jJobResultsListHldr'</span><span class="pun">)</span><span class="pln">
    job_name_list_items </span><span class="pun">=</span><span class="pln"> job_name_list</span><span class="pun">.</span><span class="pln">find_all</span><span class="pun">(</span><span class="str">'a'</span><span class="pun">)</span><span class="pln">

    </span><span class="kwd">for</span><span class="pln"> job_name </span><span class="kwd">in</span><span class="pln"> job_name_list_items</span><span class="pun">:</span><span class="pln">
        </span><span class="com">#print(job_name.prettify())</span><span class="pln">
        links </span><span class="pun">=</span><span class="pln"> job_name</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'href'</span><span class="pun">)</span><span class="pln">
        link</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">links</span><span class="pun">)</span><span class="pln">
        page1 </span><span class="pun">=</span><span class="pln"> requests</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">links</span><span class="pun">)</span><span class="pln">
        soup1 </span><span class="pun">=</span><span class="pln"> </span><span class="typ">BeautifulSoup</span><span class="pun">(</span><span class="pln">page1</span><span class="pun">.</span><span class="pln">text</span><span class="pun">,</span><span class="pln"> </span><span class="str">'html.parser'</span><span class="pun">)</span><span class="pln">
        ignore </span><span class="pun">=</span><span class="pln"> soup</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"div"</span><span class="pun">,[</span><span class="str">"flg_hldr"</span><span class="pun">,</span><span class="str">"info_box"</span><span class="pun">,</span><span class="str">"jFooter compact"</span><span class="pun">])</span><span class="pln">
        ignore</span><span class="pun">.</span><span class="pln">decompose</span><span class="pun">()</span><span class="pln">
        </span><span class="com">#ignore1 = soup.find(class_='info_box')</span><span class="pln">
        </span><span class="com">#ignore1.decompose()</span><span class="pln">
        </span><span class="com">#ignore2 = soup.find(class_='jFooter compact')</span><span class="pln">
        </span><span class="com">#ignore2.decompose()</span><span class="pln">
        content </span><span class="pun">=</span><span class="pln"> soup1</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">class_</span><span class="pun">=</span><span class="str">'jBlock'</span><span class="pun">)</span><span class="pln">
        data </span><span class="pun">=</span><span class="pln"> content</span><span class="pun">.</span><span class="pln">get_text</span><span class="pun">()</span><span class="pln">
        </span><span class="kwd">delete</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> soup1</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"span"</span><span class="pun">,</span><span class="str">"field_value font_header_light"</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">delete</span><span class="pun">.</span><span class="pln">decompose</span><span class="pun">()</span><span class="pln">
        idjob </span><span class="pun">=</span><span class="pln"> soup1</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"span"</span><span class="pun">,</span><span class="str">"field_value"</span><span class="pun">)</span><span class="pln">
        job_id</span><span class="pun">=</span><span class="pln">idjob</span><span class="pun">.</span><span class="pln">get_text</span><span class="pun">()</span><span class="pln">
        qq</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">job_id</span><span class="pun">)</span><span class="pln">
        stop_words </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">stopwords</span><span class="pun">.</span><span class="pln">words</span><span class="pun">(</span><span class="str">"english"</span><span class="pun">))</span><span class="pln">
                </span><span class="com">#remove tags</span><span class="pln">
        data</span><span class="pun">=</span><span class="pln">re</span><span class="pun">.</span><span class="kwd">sub</span><span class="pun">(</span><span class="str">"&amp;lt;/?.*?&amp;gt;"</span><span class="pun">,</span><span class="str">" &amp;lt;&amp;gt; "</span><span class="pun">,</span><span class="pln">data</span><span class="pun">)</span><span class="pln">
                </span><span class="com"># remove special characters and digits</span><span class="pln">
        data</span><span class="pun">=</span><span class="pln">re</span><span class="pun">.</span><span class="kwd">sub</span><span class="pun">(</span><span class="str">"(\\d|\\W)+"</span><span class="pun">,</span><span class="str">" "</span><span class="pun">,</span><span class="pln">data</span><span class="pun">)</span><span class="pln">
                </span><span class="com">##Convert to list from string</span><span class="pln">
        data </span><span class="pun">=</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">split</span><span class="pun">()</span><span class="pln">
                </span><span class="com">#Lemmatisation</span><span class="pln">
        lem </span><span class="pun">=</span><span class="pln"> </span><span class="typ">WordNetLemmatizer</span><span class="pun">()</span><span class="pln">
        data </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">lem</span><span class="pun">.</span><span class="pln">lemmatize</span><span class="pun">(</span><span class="pln">word</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> word </span><span class="kwd">in</span><span class="pln"> data </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> word </span><span class="kwd">in</span><span class="pln"> stop_words</span><span class="pun">]</span><span class="pln">
        data </span><span class="pun">=</span><span class="pln"> </span><span class="str">" "</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">data</span><span class="pun">)</span><span class="pln">
        dataset</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">data</span><span class="pun">)</span><span class="pln">

</span></code></pre>


      </div></div></google-codelab-step><google-codelab-step label="Building a scraper to scrape the data from M&amp;T Bank" duration="0" step="6"><div class="instructions"><div class="inner"><h2 class="step-title">6. Building a scraper to scrape the data from M&amp;T Bank</h2>
        <h2><strong>Installation of selenium web driver</strong></h2>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/pasted image 0(5).png"><strong>Why selenium web driver is needed ?</strong></p>
<p>The data on the website of M&amp;T bank is generated dynamically by Java Script Code so  Selenium Driver is used to automate and control a full fledged web browser.</p>
<h2><strong>Why is there a need for timer in this website?</strong></h2>
<p>There is dynamic loading of content in the M&amp;T bank website due to which all the links can not be transversed in a single transversal  so you have to use a timer , counter and a scroller to access all the links.</p>
<h2><strong>What is PhantomJS  ?</strong></h2>
<p>PhantomJS is a scripted headless browser used for automating web page interaction. PhantomJS along with selenium is used for headless automation which enables you to run the test for different websites.</p>
<p><strong>How to build the scraper ?</strong></p>
<p>Visit M&amp;T Careers by going to the link given below</p>
<p><a href="https://www.mtb.com/careers" target="_blank"><paper-button class="colored" raised="">Go to M&amp;T Careers</paper-button></a> </p>
<ul>
<li>Use PhantomJS to fetch the inner content by running the java script code.</li>
<li>Scroll down to the bottom of the page through selenium web driver.</li>
<li>Traverse through each of the links generated through Step 3.</li>
<li>Fetch content such as job description , job position , locations from every traversed links.</li>
</ul>
<p>The code for scraping information for M&amp;T bank is given below</p>
<pre><code><span class="kwd">from</span><span class="pln"> selenium </span><span class="kwd">import</span><span class="pln"> webdriver
</span><span class="kwd">from</span><span class="pln"> bs4 </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">BeautifulSoup</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> bs
</span><span class="kwd">import</span><span class="pln"> time
</span><span class="kwd">import</span><span class="pln"> sys
</span><span class="kwd">import</span><span class="pln"> csv
</span><span class="kwd">import</span><span class="pln"> re
</span><span class="kwd">import</span><span class="pln"> pandas </span><span class="kwd">as</span><span class="pln"> pd
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">corpus </span><span class="kwd">import</span><span class="pln"> stopwords
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">stem</span><span class="pun">.</span><span class="pln">wordnet </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">WordNetLemmatizer</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> fetchJobData</span><span class="pun">(</span><span class="pln">link</span><span class="pun">,</span><span class="pln">fileNames</span><span class="pun">,</span><span class="pln">destFile</span><span class="pun">,</span><span class="pln">institutionName</span><span class="pun">,</span><span class="pln">counter</span><span class="pun">):</span><span class="pln">
    driver </span><span class="pun">=</span><span class="pln"> webdriver</span><span class="pun">.</span><span class="typ">PhantomJS</span><span class="pun">(</span><span class="str">'C:/ADS/A1_HiringTrends/Support/phantomjs/phantomjs'</span><span class="pun">)</span><span class="pln">
    driver</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">link</span><span class="pun">)</span><span class="pln">
    counterVal</span><span class="pun">=</span><span class="pln">counter

    time</span><span class="pun">.</span><span class="pln">sleep</span><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span><span class="pln">
    htmlJobContent </span><span class="pun">=</span><span class="pln"> driver</span><span class="pun">.</span><span class="pln">execute_script</span><span class="pun">(</span><span class="str">"return document.body.innerHTML;"</span><span class="pun">)</span><span class="pln">
    soup </span><span class="pun">=</span><span class="pln"> bs</span><span class="pun">(</span><span class="pln">htmlJobContent</span><span class="pun">,</span><span class="str">'html.parser'</span><span class="pun">)</span><span class="pln">
    divClass</span><span class="pun">=</span><span class="pln">soup</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">'div'</span><span class="pun">,</span><span class="pln">attrs</span><span class="pun">={</span><span class="str">'class'</span><span class="pun">:</span><span class="str">'GWTCKEditor-Disabled'</span><span class="pun">,</span><span class="str">'dir'</span><span class="pun">:</span><span class="str">'ltr'</span><span class="pun">})</span><span class="pln">
    headVal</span><span class="pun">=</span><span class="pln">divClass</span><span class="pun">.</span><span class="pln">text
    ulClass</span><span class="pun">=</span><span class="pln">soup</span><span class="pun">.</span><span class="pln">find_all</span><span class="pun">(</span><span class="str">'ul'</span><span class="pun">,</span><span class="pln">attrs</span><span class="pun">={</span><span class="str">'class'</span><span class="pun">:</span><span class="str">'WPFO WGGO'</span><span class="pun">,</span><span class="str">'role'</span><span class="pun">:</span><span class="str">'presentation'</span><span class="pun">})[</span><span class="lit">2</span><span class="pun">]</span><span class="pln">
    </span><span class="kwd">try</span><span class="pun">:</span><span class="pln">
        location</span><span class="pun">=</span><span class="pln">str</span><span class="pun">(</span><span class="pln">ulClass</span><span class="pun">)</span><span class="pln">
        loc</span><span class="pun">=</span><span class="pln">location</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">'&lt;b&gt;Location&lt;/b&gt;'</span><span class="pun">)</span><span class="pln">
        loc</span><span class="pun">=</span><span class="pln">location</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">'&lt;/h1&gt;'</span><span class="pun">,</span><span class="pln">loc</span><span class="pun">)+</span><span class="lit">5</span><span class="pln">
        loc2</span><span class="pun">=</span><span class="pln">location</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">'&lt;p'</span><span class="pun">,</span><span class="pln">loc</span><span class="pun">)</span><span class="pln">
        location</span><span class="pun">=</span><span class="pln">location</span><span class="pun">[</span><span class="pln">loc</span><span class="pun">:</span><span class="pln">loc2</span><span class="pun">]</span><span class="pln">
        data</span><span class="pun">=</span><span class="str">''</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> x </span><span class="kwd">in</span><span class="pln"> ulClass</span><span class="pun">:</span><span class="pln">
            data</span><span class="pun">+=</span><span class="str">' '</span><span class="pun">+</span><span class="pln">x</span><span class="pun">.</span><span class="pln">text
        data</span><span class="pun">=</span><span class="pln">data</span><span class="pun">.</span><span class="pln">lower</span><span class="pun">()</span><span class="pln">
        driver</span><span class="pun">.</span><span class="pln">close</span><span class="pun">()</span><span class="pln">
        driver</span><span class="pun">.</span><span class="pln">quit</span><span class="pun">()</span><span class="pln">
        stop_words </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">stopwords</span><span class="pun">.</span><span class="pln">words</span><span class="pun">(</span><span class="str">"english"</span><span class="pun">))</span><span class="pln">
        data</span><span class="pun">=</span><span class="pln">re</span><span class="pun">.</span><span class="kwd">sub</span><span class="pun">(</span><span class="str">"&amp;lt;/?.*?&amp;gt;"</span><span class="pun">,</span><span class="str">" &amp;lt;&amp;gt; "</span><span class="pun">,</span><span class="pln">data</span><span class="pun">)</span><span class="pln">
                </span><span class="com"># remove special characters and digits</span><span class="pln">
        data</span><span class="pun">=</span><span class="pln">re</span><span class="pun">.</span><span class="kwd">sub</span><span class="pun">(</span><span class="str">"(\\d|\\W)+"</span><span class="pun">,</span><span class="str">" "</span><span class="pun">,</span><span class="pln">data</span><span class="pun">)</span><span class="pln">
                </span><span class="com">##Convert to list from string</span><span class="pln">
        data </span><span class="pun">=</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">split</span><span class="pun">()</span><span class="pln">
        </span><span class="com">#Lemmatisation</span><span class="pln">
        stop_words </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">stopwords</span><span class="pun">.</span><span class="pln">words</span><span class="pun">(</span><span class="str">"english"</span><span class="pun">))</span><span class="pln">
        lem </span><span class="pun">=</span><span class="pln"> </span><span class="typ">WordNetLemmatizer</span><span class="pun">()</span><span class="pln">
        data </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">lem</span><span class="pun">.</span><span class="pln">lemmatize</span><span class="pun">(</span><span class="pln">word</span><span class="pun">,</span><span class="pln">pos</span><span class="pun">=</span><span class="str">"v"</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> word </span><span class="kwd">in</span><span class="pln"> data </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> word </span><span class="kwd">in</span><span class="pln"> stop_words</span><span class="pun">]</span><span class="pln">
        data </span><span class="pun">=</span><span class="pln"> </span><span class="str">" "</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">data</span><span class="pun">)</span><span class="pln">
        id</span><span class="pun">=</span><span class="lit">1</span><span class="pln">

        </span><span class="kwd">for</span><span class="pln"> fileN </span><span class="kwd">in</span><span class="pln"> fileNames</span><span class="pun">:</span><span class="pln">
            valToAppend</span><span class="pun">=[</span><span class="pln">counterVal</span><span class="pun">,</span><span class="pln">institutionName</span><span class="pun">,</span><span class="pln">link</span><span class="pun">,</span><span class="pln">headVal</span><span class="pun">,</span><span class="pln">location</span><span class="pun">,</span><span class="pln">id</span><span class="pun">]</span><span class="pln">
            </span><span class="kwd">with</span><span class="pln"> open</span><span class="pun">(</span><span class="pln">fileN</span><span class="pun">,</span><span class="pln"> newline</span><span class="pun">=</span><span class="str">''</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> myFile</span><span class="pun">:</span><span class="pln">
                reader </span><span class="pun">=</span><span class="pln"> csv</span><span class="pun">.</span><span class="pln">reader</span><span class="pun">(</span><span class="pln">myFile</span><span class="pun">)</span><span class="pln">
                </span><span class="kwd">for</span><span class="pln"> row </span><span class="kwd">in</span><span class="pln"> reader</span><span class="pun">:</span><span class="pln">
                    count</span><span class="pun">=</span><span class="lit">0</span><span class="pln">
                    valtosearch</span><span class="pun">=</span><span class="pln">str</span><span class="pun">(</span><span class="pln">row</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln">
                    count </span><span class="pun">=</span><span class="pln"> sum</span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> match </span><span class="kwd">in</span><span class="pln"> re</span><span class="pun">.</span><span class="pln">finditer</span><span class="pun">(</span><span class="pln">valtosearch</span><span class="pun">.</span><span class="pln">lower</span><span class="pun">(),</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">lower</span><span class="pun">()))</span><span class="pln">
                    valToAppend</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">str</span><span class="pun">(</span><span class="pln">count</span><span class="pun">))</span><span class="pln">
            </span><span class="kwd">with</span><span class="pln"> open</span><span class="pun">(</span><span class="pln">destFile</span><span class="pun">,</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> f</span><span class="pun">:</span><span class="pln">
                writer </span><span class="pun">=</span><span class="pln"> csv</span><span class="pun">.</span><span class="pln">writer</span><span class="pun">(</span><span class="pln">f</span><span class="pun">)</span><span class="pln">
                writer</span><span class="pun">.</span><span class="pln">writerow</span><span class="pun">(</span><span class="pln">valToAppend</span><span class="pun">)</span><span class="pln">
                counterVal</span><span class="pun">+=</span><span class="lit">1</span><span class="pln">
            id</span><span class="pun">+=</span><span class="lit">1</span><span class="pln">
    </span><span class="kwd">except</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">with</span><span class="pln"> open</span><span class="pun">(</span><span class="str">'C:/ADS/A1_HiringTrends/Data/Generated/By Algorithms/Unresolved.csv'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> unresolved</span><span class="pun">:</span><span class="pln">
            writer </span><span class="pun">=</span><span class="pln"> csv</span><span class="pun">.</span><span class="pln">writer</span><span class="pun">(</span><span class="pln">unresolved</span><span class="pun">)</span><span class="pln">
            writer</span><span class="pun">.</span><span class="pln">writerow</span><span class="pun">([</span><span class="pln">link</span><span class="pun">])</span><span class="pln">
        driver</span><span class="pun">.</span><span class="pln">close</span><span class="pun">()</span><span class="pln">
        driver</span><span class="pun">.</span><span class="pln">quit</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> counterVal

driver </span><span class="pun">=</span><span class="pln"> webdriver</span><span class="pun">.</span><span class="typ">PhantomJS</span><span class="pun">(</span><span class="str">'C:/ADS/A1_HiringTrends/Support/phantomjs/phantomjs'</span><span class="pun">)</span><span class="pln">
driver</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">"https://mtb.wd5.myworkdayjobs.com/MTB"</span><span class="pun">)</span><span class="pln">
</span><span class="com"># This will get the initial html - before javascript</span><span class="pln">
</span><span class="com"># This will get the html after on-load javascript</span><span class="pln">
time</span><span class="pun">.</span><span class="pln">sleep</span><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span><span class="pln">
html2 </span><span class="pun">=</span><span class="pln"> driver</span><span class="pun">.</span><span class="pln">execute_script</span><span class="pun">(</span><span class="str">"return document.body.innerHTML;"</span><span class="pun">)</span><span class="pln">

soup </span><span class="pun">=</span><span class="pln"> bs</span><span class="pun">(</span><span class="pln">html2</span><span class="pun">,</span><span class="str">'html.parser'</span><span class="pun">)</span><span class="pln">
totalcount</span><span class="pun">=</span><span class="lit">0</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">,</span><span class="pln">tag </span><span class="kwd">in</span><span class="pln"> enumerate</span><span class="pun">(</span><span class="pln">soup</span><span class="pun">.</span><span class="pln">find_all</span><span class="pun">(</span><span class="str">'span'</span><span class="pun">,</span><span class="pln">attrs</span><span class="pun">={</span><span class="str">'class'</span><span class="pun">:</span><span class="str">'gwt-InlineLabel WF2N WG2N'</span><span class="pun">})):</span><span class="pln">
    totalcount</span><span class="pun">=</span><span class="kwd">int</span><span class="pun">(</span><span class="pln">tag</span><span class="pun">.</span><span class="pln">text</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">"Results"</span><span class="pun">,</span><span class="str">""</span><span class="pun">).</span><span class="pln">strip</span><span class="pun">())</span><span class="pln">
    </span><span class="kwd">break</span><span class="pln">
</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">totalcount</span><span class="pun">)</span><span class="pln">
count</span><span class="pun">=</span><span class="lit">0</span><span class="pln">
totalcount</span><span class="pun">+=</span><span class="lit">50</span><span class="pln">
</span><span class="kwd">while</span><span class="pln"> count</span><span class="pun">&lt;</span><span class="pln">totalcount</span><span class="pun">:</span><span class="pln">
    driver</span><span class="pun">.</span><span class="pln">execute_script</span><span class="pun">(</span><span class="str">"window.scrollTo(0, document.body.scrollHeight);"</span><span class="pun">)</span><span class="pln">
    time</span><span class="pun">.</span><span class="pln">sleep</span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln">
    count</span><span class="pun">+=</span><span class="lit">50</span><span class="pln">
html2 </span><span class="pun">=</span><span class="pln"> driver</span><span class="pun">.</span><span class="pln">execute_script</span><span class="pun">(</span><span class="str">"return document.body.innerHTML;"</span><span class="pun">)</span><span class="pln">
driver</span><span class="pun">.</span><span class="pln">close</span><span class="pun">()</span><span class="pln">
soup </span><span class="pun">=</span><span class="pln"> bs</span><span class="pun">(</span><span class="pln">html2</span><span class="pun">,</span><span class="str">'html.parser'</span><span class="pun">)</span><span class="pln">
driver</span><span class="pun">.</span><span class="pln">quit</span><span class="pun">()</span><span class="pln">

link</span><span class="pun">=</span><span class="str">''</span><span class="pln">
unsolved</span><span class="pun">=[]</span><span class="pln">
counter</span><span class="pun">=</span><span class="lit">1</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">,</span><span class="pln">tag </span><span class="kwd">in</span><span class="pln"> enumerate</span><span class="pun">(</span><span class="pln">soup</span><span class="pun">.</span><span class="pln">find_all</span><span class="pun">([</span><span class="str">'div'</span><span class="pun">,</span><span class="str">'span'</span><span class="pun">],</span><span class="pln">attrs</span><span class="pun">={</span><span class="str">'class'</span><span class="pun">:[</span><span class="str">'gwt-Label WOTO WISO'</span><span class="pun">,</span><span class="str">'gwt-InlineLabel WM-F WLYF'</span><span class="pun">]})):</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">i</span><span class="pun">%</span><span class="lit">2</span><span class="pun">==</span><span class="lit">0</span><span class="pun">):</span><span class="pln">
        link</span><span class="pun">=</span><span class="str">''</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> tag</span><span class="pun">.</span><span class="pln">has_attr</span><span class="pun">(</span><span class="str">'aria-label'</span><span class="pun">):</span><span class="pln">
            link</span><span class="pun">=</span><span class="pln">tag</span><span class="pun">[</span><span class="str">'aria-label'</span><span class="pun">]</span><span class="pln">
        </span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
            </span><span class="kwd">continue</span><span class="pln">
    </span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">link</span><span class="pun">==</span><span class="str">''</span><span class="pun">):</span><span class="pln">
            </span><span class="kwd">continue</span><span class="pln">
        </span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
            link</span><span class="pun">=</span><span class="str">'https://mtb.wd5.myworkdayjobs.com/en-US/MTB/job/'</span><span class="pun">+</span><span class="pln">tag</span><span class="pun">.</span><span class="pln">text</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">'|'</span><span class="pun">)[</span><span class="lit">0</span><span class="pun">].</span><span class="pln">strip</span><span class="pun">().</span><span class="pln">replace</span><span class="pun">(</span><span class="str">' '</span><span class="pun">,</span><span class="str">'-'</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">'.'</span><span class="pun">,</span><span class="str">''</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">'&amp;'</span><span class="pun">,</span><span class="str">''</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">'('</span><span class="pun">,</span><span class="str">''</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">')'</span><span class="pun">,</span><span class="str">''</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">','</span><span class="pun">,</span><span class="str">''</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">'/'</span><span class="pun">,</span><span class="str">''</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">'\\'</span><span class="pun">,</span><span class="str">''</span><span class="pun">)+</span><span class="str">'/'</span><span class="pun">+</span><span class="pln">link</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">'- Bankruptcy'</span><span class="pun">,</span><span class="str">''</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">' '</span><span class="pun">,</span><span class="str">'-'</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">'.'</span><span class="pun">,</span><span class="str">''</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">'&amp;'</span><span class="pun">,</span><span class="str">'-'</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">'('</span><span class="pun">,</span><span class="str">'-'</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">')'</span><span class="pun">,</span><span class="str">'-'</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">','</span><span class="pun">,</span><span class="str">'-'</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">'/'</span><span class="pun">,</span><span class="str">'-'</span><span class="pun">).</span><span class="pln">replace</span><span class="pun">(</span><span class="str">'\\'</span><span class="pun">,</span><span class="str">'-'</span><span class="pun">)+</span><span class="str">'_'</span><span class="pun">+</span><span class="pln">tag</span><span class="pun">.</span><span class="pln">text</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">'|'</span><span class="pun">)[</span><span class="lit">1</span><span class="pun">].</span><span class="pln">strip</span><span class="pun">()</span><span class="pln">
            fileNames</span><span class="pun">=[</span><span class="str">'C:/ADS/A1_HiringTrends/Data/Generated/By Algorithms/Textrank_top100.csv'</span><span class="pun">,</span><span class="str">'C:/ADS/A1_HiringTrends/Data/Generated/By Algorithms/TF-IDF_top100.csv'</span><span class="pun">,</span><span class="str">'C:/ADS/A1_HiringTrends/Data/Generated/By Algorithms/WordCount_top100.csv'</span><span class="pun">]</span><span class="pln">
            destFile</span><span class="pun">=</span><span class="str">'C:/ADS/A1_HiringTrends/Data/Generated/By Algorithms/M&amp;T_Scraped.csv'</span><span class="pln">
            instName</span><span class="pun">=</span><span class="str">'M&amp;T Bank'</span><span class="pln">
            </span><span class="kwd">try</span><span class="pun">:</span><span class="pln">
                </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">link</span><span class="pun">)</span><span class="pln">
                counter</span><span class="pun">=</span><span class="pln">fetchJobData</span><span class="pun">(</span><span class="pln">link</span><span class="pun">,</span><span class="pln">fileNames</span><span class="pun">,</span><span class="pln">destFile</span><span class="pun">,</span><span class="pln">instName</span><span class="pun">,</span><span class="pln">counter</span><span class="pun">)</span><span class="pln">
            </span><span class="kwd">except</span><span class="pun">:</span><span class="pln">
                </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">exc_info</span><span class="pun">()[</span><span class="lit">0</span><span class="pun">])</span><span class="pln">
                </span><span class="kwd">try</span><span class="pun">:</span><span class="pln">
                    </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">link</span><span class="pun">+</span><span class="str">'-1'</span><span class="pun">)</span><span class="pln">
                    counter</span><span class="pun">=</span><span class="pln">fetchJobData</span><span class="pun">(</span><span class="pln">link</span><span class="pun">+</span><span class="str">'-1'</span><span class="pun">,</span><span class="pln">fileNames</span><span class="pun">,</span><span class="pln">destFile</span><span class="pun">,</span><span class="pln">instName</span><span class="pun">,</span><span class="pln">counter</span><span class="pun">)</span><span class="pln">
                </span><span class="kwd">except</span><span class="pun">:</span><span class="pln">
                    unsolved</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">link</span><span class="pun">)</span><span class="pln">
                    </span><span class="kwd">with</span><span class="pln"> open</span><span class="pun">(</span><span class="str">'C:/ADS/A1_HiringTrends/Data/Generated/By Algorithms/Unresolved.csv'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'a'</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> unresolved</span><span class="pun">:</span><span class="pln">
                        writer </span><span class="pun">=</span><span class="pln"> csv</span><span class="pun">.</span><span class="pln">writer</span><span class="pun">(</span><span class="pln">unresolved</span><span class="pun">)</span><span class="pln">
                        writer</span><span class="pun">.</span><span class="pln">writerow</span><span class="pun">([</span><span class="pln">link</span><span class="pun">])</span><span class="pln">
                    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'*'</span><span class="pun">*</span><span class="lit">50</span><span class="pun">+</span><span class="str">'\nUnsolved:'</span><span class="pun">+</span><span class="pln">link</span><span class="pun">+</span><span class="str">'\n'</span><span class="pun">+</span><span class="str">'*'</span><span class="pun">*</span><span class="lit">50</span><span class="pun">)</span><span class="pln">
                    </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">exc_info</span><span class="pun">()[</span><span class="lit">0</span><span class="pun">])</span><span class="pln">
</span><span class="kwd">print</span><span class="pun">(</span><span class="str">'End'</span><span class="pun">)</span><span class="pln">


</span></code></pre>


      </div></div></google-codelab-step><google-codelab-step label="Fetching requirements for analysis from the websites" duration="0" step="7"><div class="instructions"><div class="inner"><h2 class="step-title">7. Fetching requirements for analysis from the websites</h2>
        <h2><strong>Comparison of data collected from the bank websites to the lists obtained in former sections. </strong></h2>
<p>The data obtained from the bank websites is compared with the data obtained from the former lists of fintech and the count of occurence of each word is appended in a new csv file.</p>
<pre><code><span class="pln">                 
</span><span class="kwd">import</span><span class="pln"> requests
</span><span class="kwd">import</span><span class="pln"> csv
</span><span class="kwd">from</span><span class="pln"> bs4 </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">BeautifulSoup</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> re
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">corpus </span><span class="kwd">import</span><span class="pln"> stopwords
</span><span class="kwd">from</span><span class="pln"> nltk</span><span class="pun">.</span><span class="pln">stem</span><span class="pun">.</span><span class="pln">wordnet </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">WordNetLemmatizer</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> lxml
</span><span class="kwd">import</span><span class="pln"> csv
</span><span class="kwd">from</span><span class="pln"> collections </span><span class="kwd">import</span><span class="pln"> defaultdict
</span><span class="kwd">import</span><span class="pln"> pandas </span><span class="kwd">as</span><span class="pln"> pd
</span><span class="kwd">import</span><span class="pln"> numpy </span><span class="kwd">as</span><span class="pln"> np

</span><span class="com">#from lxml import etree</span><span class="pln">

</span><span class="com">#import urllib</span><span class="pln">
</span><span class="kwd">from</span><span class="pln"> urllib</span><span class="pun">.</span><span class="pln">request </span><span class="kwd">import</span><span class="pln"> urlopen
pages </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
abcd </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
qq</span><span class="pun">=[]</span><span class="pln">
count</span><span class="pun">=</span><span class="lit">0</span><span class="pln">
testDict </span><span class="pun">=</span><span class="pln"> defaultdict</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">26</span><span class="pun">):</span><span class="pln">
    url </span><span class="pun">=</span><span class="pln"> </span><span class="str">'https://careers.northerntrust.com/jobs/search/8420211/page'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> str</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">'.htm'</span><span class="pln">
    </span><span class="com">#print(url)</span><span class="pln">
    pages</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">url</span><span class="pun">)</span><span class="pln">
dataset</span><span class="pun">=[]</span><span class="pln">
counter </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
link</span><span class="pun">=[]</span><span class="pln">
</span><span class="com">#print(pages)</span><span class="pln">
count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> item </span><span class="kwd">in</span><span class="pln"> pages</span><span class="pun">:</span><span class="pln">
    page </span><span class="pun">=</span><span class="pln"> requests</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">item</span><span class="pun">)</span><span class="pln">
    soup </span><span class="pun">=</span><span class="pln"> </span><span class="typ">BeautifulSoup</span><span class="pun">(</span><span class="pln">page</span><span class="pun">.</span><span class="pln">text</span><span class="pun">,</span><span class="pln"> </span><span class="str">'html.parser'</span><span class="pun">)</span><span class="pln">

</span><span class="com">#print(soup)</span><span class="pln">

    hash_links </span><span class="pun">=</span><span class="pln"> soup</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">class_</span><span class="pun">=</span><span class="str">'job_filters_toggle jJobFiltersToggle'</span><span class="pun">)</span><span class="pln">
    hash_links</span><span class="pun">.</span><span class="pln">decompose</span><span class="pun">()</span><span class="pln">

    job_name_list </span><span class="pun">=</span><span class="pln"> soup</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">class_</span><span class="pun">=</span><span class="str">'info_listings jJobResultsListHldr'</span><span class="pun">)</span><span class="pln">
    job_name_list_items </span><span class="pun">=</span><span class="pln"> job_name_list</span><span class="pun">.</span><span class="pln">find_all</span><span class="pun">(</span><span class="str">'a'</span><span class="pun">)</span><span class="pln">

    </span><span class="kwd">for</span><span class="pln"> job_name </span><span class="kwd">in</span><span class="pln"> job_name_list_items</span><span class="pun">:</span><span class="pln">
        </span><span class="com">#print(job_name.prettify())</span><span class="pln">
        links </span><span class="pun">=</span><span class="pln"> job_name</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'href'</span><span class="pun">)</span><span class="pln">
        link</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">links</span><span class="pun">)</span><span class="pln">
        page1 </span><span class="pun">=</span><span class="pln"> requests</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">links</span><span class="pun">)</span><span class="pln">
        soup1 </span><span class="pun">=</span><span class="pln"> </span><span class="typ">BeautifulSoup</span><span class="pun">(</span><span class="pln">page1</span><span class="pun">.</span><span class="pln">text</span><span class="pun">,</span><span class="pln"> </span><span class="str">'html.parser'</span><span class="pun">)</span><span class="pln">
        ignore </span><span class="pun">=</span><span class="pln"> soup</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"div"</span><span class="pun">,[</span><span class="str">"flg_hldr"</span><span class="pun">,</span><span class="str">"info_box"</span><span class="pun">,</span><span class="str">"jFooter compact"</span><span class="pun">])</span><span class="pln">
        ignore</span><span class="pun">.</span><span class="pln">decompose</span><span class="pun">()</span><span class="pln">
        </span><span class="com">#ignore1 = soup.find(class_='info_box')</span><span class="pln">
        </span><span class="com">#ignore1.decompose()</span><span class="pln">
        </span><span class="com">#ignore2 = soup.find(class_='jFooter compact')</span><span class="pln">
        </span><span class="com">#ignore2.decompose()</span><span class="pln">
        content </span><span class="pun">=</span><span class="pln"> soup1</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">class_</span><span class="pun">=</span><span class="str">'jBlock'</span><span class="pun">)</span><span class="pln">
        data </span><span class="pun">=</span><span class="pln"> content</span><span class="pun">.</span><span class="pln">get_text</span><span class="pun">()</span><span class="pln">
        </span><span class="kwd">delete</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> soup1</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"span"</span><span class="pun">,</span><span class="str">"field_value font_header_light"</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">delete</span><span class="pun">.</span><span class="pln">decompose</span><span class="pun">()</span><span class="pln">
        idjob </span><span class="pun">=</span><span class="pln"> soup1</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">"span"</span><span class="pun">,</span><span class="str">"field_value"</span><span class="pun">)</span><span class="pln">
        job_id</span><span class="pun">=</span><span class="pln">idjob</span><span class="pun">.</span><span class="pln">get_text</span><span class="pun">()</span><span class="pln">
        qq</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">job_id</span><span class="pun">)</span><span class="pln">
        stop_words </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">stopwords</span><span class="pun">.</span><span class="pln">words</span><span class="pun">(</span><span class="str">"english"</span><span class="pun">))</span><span class="pln">
                </span><span class="com">#remove tags</span><span class="pln">
        data</span><span class="pun">=</span><span class="pln">re</span><span class="pun">.</span><span class="kwd">sub</span><span class="pun">(</span><span class="str">"&amp;lt;/?.*?&amp;gt;"</span><span class="pun">,</span><span class="str">" &amp;lt;&amp;gt; "</span><span class="pun">,</span><span class="pln">data</span><span class="pun">)</span><span class="pln">
                </span><span class="com"># remove special characters and digits</span><span class="pln">
        data</span><span class="pun">=</span><span class="pln">re</span><span class="pun">.</span><span class="kwd">sub</span><span class="pun">(</span><span class="str">"(\\d|\\W)+"</span><span class="pun">,</span><span class="str">" "</span><span class="pun">,</span><span class="pln">data</span><span class="pun">)</span><span class="pln">
                </span><span class="com">##Convert to list from string</span><span class="pln">
        data </span><span class="pun">=</span><span class="pln"> data</span><span class="pun">.</span><span class="pln">split</span><span class="pun">()</span><span class="pln">
                </span><span class="com">#Lemmatisation</span><span class="pln">
        lem </span><span class="pun">=</span><span class="pln"> </span><span class="typ">WordNetLemmatizer</span><span class="pun">()</span><span class="pln">
        data </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">lem</span><span class="pun">.</span><span class="pln">lemmatize</span><span class="pun">(</span><span class="pln">word</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> word </span><span class="kwd">in</span><span class="pln"> data </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> word </span><span class="kwd">in</span><span class="pln"> stop_words</span><span class="pun">]</span><span class="pln">
        data </span><span class="pun">=</span><span class="pln"> </span><span class="str">" "</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">data</span><span class="pun">)</span><span class="pln">
        dataset</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">data</span><span class="pun">)</span><span class="pln">
        count</span><span class="pun">+=</span><span class="lit">1</span><span class="pln">

</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">count</span><span class="pun">)</span><span class="pln">
</span><span class="com">#dataset = ['hi my name is financial customer financial', 'hii hii hii nmy name is customer customer customer']</span><span class="pln">
</span><span class="com">#print(dataset)</span><span class="pln">
x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
abc</span><span class="pun">=[]</span><span class="pln">
df </span><span class="pun">=</span><span class="pln"> pd</span><span class="pun">.</span><span class="pln">read_csv</span><span class="pun">(</span><span class="str">"C:/ADS/A1_HiringTrends/Data/Generated/By Algorithms/WordCount_top100.csv"</span><span class="pun">,</span><span class="pln">header</span><span class="pun">=</span><span class="kwd">None</span><span class="pun">,</span><span class="pln">names</span><span class="pun">=[</span><span class="str">"0"</span><span class="pun">,</span><span class="str">"words"</span><span class="pun">])</span><span class="pln">
</span><span class="com">#df = pd.read_csv("Z:/ADS/a/textrank_final.csv")</span><span class="pln">
</span><span class="kwd">with</span><span class="pln"> open</span><span class="pun">(</span><span class="str">'C:/ADS/A1_HiringTrends/Data/Generated/By Algorithms/WordCount_top100.csv'</span><span class="pun">,</span><span class="pln"> newline</span><span class="pun">=</span><span class="str">''</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> myFile</span><span class="pun">:</span><span class="pln">
    reader </span><span class="pun">=</span><span class="pln"> csv</span><span class="pun">.</span><span class="pln">reader</span><span class="pun">(</span><span class="pln">myFile</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> row </span><span class="kwd">in</span><span class="pln"> reader</span><span class="pun">:</span><span class="pln">
        abc</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">row</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln">
    </span><span class="com">#for row in reader:</span><span class="pln">
        </span><span class="com">#print(row[1])</span><span class="pln">
</span><span class="com">#print(abc)</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> text </span><span class="kwd">in</span><span class="pln"> dataset</span><span class="pun">:</span><span class="pln">
        </span><span class="com">#print(text)</span><span class="pln">
    thisline </span><span class="pun">=</span><span class="pln"> text</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">" "</span><span class="pun">);</span><span class="pln">
    </span><span class="com">#print(thisline)</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> q </span><span class="kwd">in</span><span class="pln"> abc</span><span class="pun">:</span><span class="pln">
        </span><span class="com">#print(row)</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> wd </span><span class="kwd">in</span><span class="pln"> thisline</span><span class="pun">:</span><span class="pln">
            </span><span class="com">#print(wd)</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> q </span><span class="pun">==</span><span class="pln"> wd</span><span class="pun">:</span><span class="pln">
                </span><span class="kwd">if</span><span class="pln"> wd </span><span class="kwd">in</span><span class="pln"> abcd</span><span class="pun">:</span><span class="pln">
                    abcd</span><span class="pun">[</span><span class="pln">wd</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="lit">1</span><span class="pln">

                </span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
                    abcd</span><span class="pun">.</span><span class="pln">update</span><span class="pun">({</span><span class="pln">wd</span><span class="pun">:</span><span class="lit">1</span><span class="pun">})</span><span class="pln">
                        </span><span class="com">#abcd[wd] = 1</span><span class="pln">
    </span><span class="com">#print(abcd)</span><span class="pln">
    </span><span class="com">#x = 0</span><span class="pln">
    </span><span class="com">#df = pd.read_csv("Z:/ADS/a/textrank_final.csv",header=None,names=["ranking","words","rate"])</span><span class="pln">
    df</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]=</span><span class="pln"> df</span><span class="pun">[</span><span class="str">'words'</span><span class="pun">].</span><span class="pln">map</span><span class="pun">(</span><span class="pln">abcd</span><span class="pun">)</span><span class="pln">
    x </span><span class="pun">+=</span><span class="lit">1</span><span class="pln">
    abcd</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">()</span><span class="pln">
</span><span class="com">#df</span><span class="pln">
</span><span class="com">#df2 = df.drop(df.column2)</span><span class="pln">
df2_transposed </span><span class="pun">=</span><span class="pln"> df</span><span class="pun">.</span><span class="pln">transpose</span><span class="pun">()</span><span class="pln"> </span><span class="com"># or df2.transpose()</span><span class="pln">
df2_transposed2 </span><span class="pun">=</span><span class="pln"> df2_transposed</span><span class="pun">.</span><span class="pln">drop</span><span class="pun">(</span><span class="pln">df2_transposed</span><span class="pun">.</span><span class="pln">index</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln">

df2_transposed2</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(</span><span class="pln">loc</span><span class="pun">=</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> column</span><span class="pun">=</span><span class="str">'Job No'</span><span class="pun">,</span><span class="pln">value</span><span class="pun">=</span><span class="str">''</span><span class="pun">)</span><span class="pln">
df2_transposed2</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(</span><span class="pln">loc</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> column</span><span class="pun">=</span><span class="str">'Institutation'</span><span class="pun">,</span><span class="pln">value</span><span class="pun">=</span><span class="str">''</span><span class="pun">)</span><span class="pln">
df2_transposed2</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(</span><span class="pln">loc</span><span class="pun">=</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> column</span><span class="pun">=</span><span class="str">'URL(url of job posting)'</span><span class="pun">,</span><span class="pln">value</span><span class="pun">=</span><span class="str">''</span><span class="pun">)</span><span class="pln">
df2_transposed2</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(</span><span class="pln">loc</span><span class="pun">=</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> column</span><span class="pun">=</span><span class="str">'List Id'</span><span class="pun">,</span><span class="pln">value</span><span class="pun">=</span><span class="str">''</span><span class="pun">)</span><span class="pln">
df2_transposed2
q</span><span class="pun">=</span><span class="lit">1</span><span class="pln">
m</span><span class="pun">=</span><span class="lit">1</span><span class="pln">
o</span><span class="pun">=</span><span class="lit">1</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> a </span><span class="kwd">in</span><span class="pln"> qq</span><span class="pun">:</span><span class="pln">
    df2_transposed2</span><span class="pun">.</span><span class="pln">iloc</span><span class="pun">[</span><span class="pln">m</span><span class="pun">,</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> a
    m</span><span class="pun">+=</span><span class="lit">1</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> l </span><span class="kwd">in</span><span class="pln"> link</span><span class="pun">:</span><span class="pln">
    df2_transposed2</span><span class="pun">.</span><span class="pln">iloc</span><span class="pun">[</span><span class="pln">q</span><span class="pun">,</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> l
    q</span><span class="pun">+=</span><span class="lit">1</span><span class="pln">
inst </span><span class="pun">=</span><span class="pln"> </span><span class="str">'northern trust'</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> o </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">o</span><span class="pun">,</span><span class="pln">count</span><span class="pun">+</span><span class="lit">1</span><span class="pun">):</span><span class="pln">
    df2_transposed2</span><span class="pun">.</span><span class="pln">iloc</span><span class="pun">[</span><span class="pln">o</span><span class="pun">,</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">'1'</span><span class="pln">
    df2_transposed2</span><span class="pun">.</span><span class="pln">iloc</span><span class="pun">[</span><span class="pln">o</span><span class="pun">,</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> inst
    o</span><span class="pun">+=</span><span class="lit">1</span><span class="pln">
df2_transposed2 </span><span class="pun">=</span><span class="pln"> df2_transposed2</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="pln">np</span><span class="pun">.</span><span class="pln">nan</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">
df2_transposed2</span><span class="pun">.</span><span class="pln">to_csv</span><span class="pun">(</span><span class="str">"C:/ADS/A1_HiringTrends/Data/Generated/By Algorithms/final_files/WordCount_final_file.csv"</span><span class="pun">,</span><span class="pln">index</span><span class="pun">=</span><span class="kwd">False</span><span class="pun">,</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">'utf8'</span><span class="pun">)</span><span class="pln">


</span></code></pre>
<p>The CSV file generated should look like the following </p>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/what will you build(1).PNG"></p>
<h2><strong>Key Areas </strong></h2>
<p>Ordered the key areas based on the number of words .This is done by slicing the csv files made in the previous sections. For this analysis we would need The bucket ID and the key areas.For Example finance had the highest count so the size of finance word would be largest and then the size of words keep decreasing according to their count.</p>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/Key Areas.png"></p>
<h2><strong>Key Hiring Trends </strong></h2>
<p>After analysing the words on the basis of their count.Key areas can be calculated on the basis of the frequency of words. Compare the parsed data obtained from scraping the websites to our former csv's. Then obtain the frequency of every word.The percentage of the total of the count of all the words is calculated.</p>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/Hiring Trends.png"></p>
<h2><strong>Word Clouds </strong></h2>
<p>The words with the most frequency are the largest in size.The data is filtered on the basis of frequency of the words occurrence in both the institutions.</p>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/WordCloud M&amp;T.png"></p>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/WordCloud Northern Trust.png"></p>
<p><strong>Top 10 location of job openings</strong></p>
<p>Slice the scraped data observed from the websites into ID , institution , Position and location. So job openings are analysed on the basis of the sliced data. Top 10 positions with the job openings are displayed in the bar chart.<img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/Top 10 Locations by # of Job Openings.png"></p>
<h2><strong>Classification of jobs by sector</strong></h2>
<p>Slice the scraped data observed from the websites into ID , institution , Position and location. So job openings are analysed on the basis of the sliced data.Then the classification of all the jobs is displayed in the bar graph.</p>
<p><img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/# of Jobs by Sector.png"></p>
<h2><strong>Northern Trust Key Areas</strong></h2>
<p>Contribution of a specific key area for Northern Trust Bank. This can be displayed by the following pie chart <img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/Northern Trust Key Areas.png"></p>
<h2><strong>M &amp; T Bank Key Areas</strong></h2>
<p>Contribution of a specific key area for M &amp; T Bank. This can be displayed by the following pie chart.<img style="max-width: 624.00px" src="./Key Hiring Trends in Fintech_files/M&amp;T Key Areas.png"></p>


      </div></div></google-codelab-step><google-codelab-step label="Interpretation of analysis" duration="0" step="8"><div class="instructions"><div class="inner"><h2 class="step-title">8. Interpretation of analysis</h2>
        <p><strong>What we have used for our interpretation<br></strong>1.Total Scores of each word based on their Number of Occurrence in each Link<br>2.These total scores have been segmented by Institutions<br>3.Also, we have taken into consideration, the most common words (164 in our case) from the pool of 300 words (Top 100 retrieved from each Algorithm)<br>4.We bucketed these 164 words based on the Most Relevant Categories (i.e Our Bucket Headers)<br>5.We scraped the websites of both banks and also retrieved a list of Job Openings, Job Categories and then we took this List and arranged them based on Job Categories (which is our another bucket of data)<br><br><strong>FOR PART 3</strong></p>
<h3><br>KEY AREAS</h3>
<p>The Key Areas drawn from our interpretation using Part 1 Are the Segmentation of Buckets based on the Keywords</p>
<h3><br>KEY HIRING TRENDS</h3>
<p>Based on the Keywords we retrieved in Part 1, when we ran them against the data retrieved by web scraping in Part 2, we could see that for both the banks, there are a certain set of Keywords that occurred the greatest number of times. It could be interpreted by the Word Clouds we have generated.  But what's more interesting is that, when we visualized the data for the "Job Categories by the number of Openings" and compared it against "Key areas based on Word Frequency", we find out similar results which brings us to a conclusion that our analysis is accurate<br></p>
<h3>OTHER INTERPRETATION</h3>
<p>We have other visualizations where we are looking at the contribution of our key areas for both the Institutions individually. Also we can see that New York has the most number of Job openings for both institutions.<br></p>


      </div></div></google-codelab-step></div><div id="controls"><div id="fabs"><a href="https://codelabs-preview.appspot.com/?file_id=1Zaw7jykgg-UtbOf3QatmU6JlHrk2wEtPh61uj1rrPuw#" id="previous-step" title="Previous step">Back</a><div class="spacer"></div><a href="https://codelabs-preview.appspot.com/?file_id=1Zaw7jykgg-UtbOf3QatmU6JlHrk2wEtPh61uj1rrPuw#" id="next-step" title="Next step">Next</a><a href="https://codelabs-preview.appspot.com/" id="done" hidden="" title="Codelab complete">Done</a></div></div></div></google-codelab>

  <script async="">
    document.addEventListener("DOMContentLoaded", function() {
      var pubBtn = document.getElementById('publishButton');
      var pubForm = document.getElementById('publishForm');
      var pubStatus = document.getElementById('publishButtonStatus');

      pubForm.addEventListener('submit', function(e) {
        e.preventDefault();
        pubBtn.disabled = true;
        pubStatus.textContent = '';
        pubStatus.classList.remove('success');
        pubStatus.classList.remove('error');

        var req = new XMLHttpRequest();

        var onError = function() {
          var msg = 'Request failed';
          if (req.statusText) {
            msg += ' with status "' + req.statusText + '"';
          }
          if (req.responseText) {
            msg += ': ' + req.responseText;
          }
          pubStatus.classList.add('error');
          pubStatus.textContent = msg;
          pubBtn.disabled = false;
        };

        req.addEventListener('load', function() {
          if (req.status != 200) {
            onError();
            return;
          }
          pubStatus.textContent = ('Publication request submitted' +
            ' (reload preview to re-publish)');
          pubStatus.classList.add('success');
        });
        req.addEventListener('error', onError);
        req.addEventListener('abort', onError);
        req.open("post", pubForm.action);
        req.send(new FormData(pubForm));
      });
    });
  </script>

  <script src="./Key Hiring Trends in Fintech_files/native-shim.js.download"></script>
  <script src="./Key Hiring Trends in Fintech_files/custom-elements.min.js.download"></script>
  <script src="./Key Hiring Trends in Fintech_files/prettify.js.download"></script>
  <script src="./Key Hiring Trends in Fintech_files/codelab-elements.js.download"></script>


</body></html>
